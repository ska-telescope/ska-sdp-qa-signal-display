import * as d3 from 'd3';
import * as _ from 'lodash';
import { removeLastDirectoryPartOf } from 'src/utils/common';
import myImg from 'src/utils/default_image.bmp';

interface Cell {
  metadata: { baseline: string; idx: number };
}

class SpectrogramPlotTable {
  divId;
  width: number;
  height: number;
  cellHeight: number;
  cellWidth: number;
  cellGap: number = 5;

  table;
  cells: Cell[][];
  colNames;
  rowNames;
  numRows;
  numCols;
  len;
  unwrap = ({ baseline, polarisation }) => ({ baseline, polarisation });

  constructor(divId, width = 1200, height = 600, cellWidth = 200, cellHeight = 100) {
    this.divId = divId;
    this.width = width;
    this.height = height;
    this.cellWidth = cellWidth;
    this.cellHeight = cellHeight;
  }

  draw() {
    var data: string[]
    data = ["m033_m033_XX","m033_m033_XY","m033_m033_YX","m033_m033_YY","m034_m034_XX","m034_m034_XY","m034_m034_YX","m034_m034_YY","m035_m035_XX","m035_m035_XY","m035_m035_YX","m035_m035_YY","m036_m036_XX","m036_m036_XY","m036_m036_YX","m036_m036_YY","m037_m037_XX","m037_m037_XY","m037_m037_YX","m037_m037_YY","m038_m038_XX","m038_m038_XY","m038_m038_YX","m038_m038_YY","m039_m039_XX","m039_m039_XY","m039_m039_YX","m039_m039_YY","m040_m040_XX","m040_m040_XY","m040_m040_YX","m040_m040_YY","m041_m041_XX","m041_m041_XY","m041_m041_YX","m041_m041_YY","m042_m042_XX","m042_m042_XY","m042_m042_YX","m042_m042_YY","m043_m043_XX","m043_m043_XY","m043_m043_YX","m043_m043_YY","m044_m044_XX","m044_m044_XY","m044_m044_YX","m044_m044_YY","m045_m045_XX","m045_m045_XY","m045_m045_YX","m045_m045_YY","m046_m046_XX","m046_m046_XY","m046_m046_YX","m046_m046_YY","m047_m047_XX","m047_m047_XY","m047_m047_YX","m047_m047_YY","m049_m049_XX","m049_m049_XY","m049_m049_YX","m049_m049_YY","m050_m050_XX","m050_m050_XY","m050_m050_YX","m050_m050_YY","m051_m051_XX","m051_m051_XY","m051_m051_YX","m051_m051_YY","m052_m052_XX","m052_m052_XY","m052_m052_YX","m052_m052_YY","m053_m053_XX","m053_m053_XY","m053_m053_YX","m053_m053_YY","m054_m054_XX","m054_m054_XY","m054_m054_YX","m054_m054_YY","m055_m055_XX","m055_m055_XY","m055_m055_YX","m055_m055_YY","m056_m056_XX","m056_m056_XY","m056_m056_YX","m056_m056_YY","m057_m057_XX","m057_m057_XY","m057_m057_YX","m057_m057_YY","m058_m058_XX","m058_m058_XY","m058_m058_YX","m058_m058_YY","m059_m059_XX","m059_m059_XY","m059_m059_YX","m059_m059_YY","m060_m060_XX","m060_m060_XY","m060_m060_YX","m060_m060_YY","m061_m061_XX","m061_m061_XY","m061_m061_YX","m061_m061_YY","m062_m062_XX","m062_m062_XY","m062_m062_YX","m062_m062_YY","m063_m063_XX","m063_m063_XY","m063_m063_YX","m063_m063_YY","m033_m034_XX","m033_m034_XY","m033_m034_YX","m033_m034_YY","m033_m035_XX","m033_m035_XY","m033_m035_YX","m033_m035_YY","m034_m035_XX","m034_m035_XY","m034_m035_YX","m034_m035_YY","m033_m036_XX","m033_m036_XY","m033_m036_YX","m033_m036_YY","m034_m036_XX","m034_m036_XY","m034_m036_YX","m034_m036_YY","m035_m036_XX","m035_m036_XY","m035_m036_YX","m035_m036_YY","m033_m037_XX","m033_m037_XY","m033_m037_YX","m033_m037_YY","m034_m037_XX","m034_m037_XY","m034_m037_YX","m034_m037_YY","m035_m037_XX","m035_m037_XY","m035_m037_YX","m035_m037_YY","m036_m037_XX","m036_m037_XY","m036_m037_YX","m036_m037_YY","m033_m038_XX","m033_m038_XY","m033_m038_YX","m033_m038_YY","m034_m038_XX","m034_m038_XY","m034_m038_YX","m034_m038_YY","m035_m038_XX","m035_m038_XY","m035_m038_YX","m035_m038_YY","m036_m038_XX","m036_m038_XY","m036_m038_YX","m036_m038_YY","m037_m038_XX","m037_m038_XY","m037_m038_YX","m037_m038_YY","m033_m039_XX","m033_m039_XY","m033_m039_YX","m033_m039_YY","m034_m039_XX","m034_m039_XY","m034_m039_YX","m034_m039_YY","m035_m039_XX","m035_m039_XY","m035_m039_YX","m035_m039_YY","m036_m039_XX","m036_m039_XY","m036_m039_YX","m036_m039_YY","m037_m039_XX","m037_m039_XY","m037_m039_YX","m037_m039_YY","m038_m039_XX","m038_m039_XY","m038_m039_YX","m038_m039_YY","m033_m040_XX","m033_m040_XY","m033_m040_YX","m033_m040_YY","m034_m040_XX","m034_m040_XY","m034_m040_YX","m034_m040_YY","m035_m040_XX","m035_m040_XY","m035_m040_YX","m035_m040_YY","m036_m040_XX","m036_m040_XY","m036_m040_YX","m036_m040_YY","m037_m040_XX","m037_m040_XY","m037_m040_YX","m037_m040_YY","m038_m040_XX","m038_m040_XY","m038_m040_YX","m038_m040_YY","m039_m040_XX","m039_m040_XY","m039_m040_YX","m039_m040_YY","m033_m041_XX","m033_m041_XY","m033_m041_YX","m033_m041_YY","m034_m041_XX","m034_m041_XY","m034_m041_YX","m034_m041_YY","m035_m041_XX","m035_m041_XY","m035_m041_YX","m035_m041_YY","m036_m041_XX","m036_m041_XY","m036_m041_YX","m036_m041_YY","m037_m041_XX","m037_m041_XY","m037_m041_YX","m037_m041_YY","m038_m041_XX","m038_m041_XY","m038_m041_YX","m038_m041_YY","m039_m041_XX","m039_m041_XY","m039_m041_YX","m039_m041_YY","m040_m041_XX","m040_m041_XY","m040_m041_YX","m040_m041_YY","m033_m042_XX","m033_m042_XY","m033_m042_YX","m033_m042_YY","m034_m042_XX","m034_m042_XY","m034_m042_YX","m034_m042_YY","m035_m042_XX","m035_m042_XY","m035_m042_YX","m035_m042_YY","m036_m042_XX","m036_m042_XY","m036_m042_YX","m036_m042_YY","m037_m042_XX","m037_m042_XY","m037_m042_YX","m037_m042_YY","m038_m042_XX","m038_m042_XY","m038_m042_YX","m038_m042_YY","m039_m042_XX","m039_m042_XY","m039_m042_YX","m039_m042_YY","m040_m042_XX","m040_m042_XY","m040_m042_YX","m040_m042_YY","m041_m042_XX","m041_m042_XY","m041_m042_YX","m041_m042_YY","m033_m043_XX","m033_m043_XY","m033_m043_YX","m033_m043_YY","m034_m043_XX","m034_m043_XY","m034_m043_YX","m034_m043_YY","m035_m043_XX","m035_m043_XY","m035_m043_YX","m035_m043_YY","m036_m043_XX","m036_m043_XY","m036_m043_YX","m036_m043_YY","m037_m043_XX","m037_m043_XY","m037_m043_YX","m037_m043_YY","m038_m043_XX","m038_m043_XY","m038_m043_YX","m038_m043_YY","m039_m043_XX","m039_m043_XY","m039_m043_YX","m039_m043_YY","m040_m043_XX","m040_m043_XY","m040_m043_YX","m040_m043_YY","m041_m043_XX","m041_m043_XY","m041_m043_YX","m041_m043_YY","m042_m043_XX","m042_m043_XY","m042_m043_YX","m042_m043_YY","m033_m044_XX","m033_m044_XY","m033_m044_YX","m033_m044_YY","m034_m044_XX","m034_m044_XY","m034_m044_YX","m034_m044_YY","m035_m044_XX","m035_m044_XY","m035_m044_YX","m035_m044_YY","m036_m044_XX","m036_m044_XY","m036_m044_YX","m036_m044_YY","m037_m044_XX","m037_m044_XY","m037_m044_YX","m037_m044_YY","m038_m044_XX","m038_m044_XY","m038_m044_YX","m038_m044_YY","m039_m044_XX","m039_m044_XY","m039_m044_YX","m039_m044_YY","m040_m044_XX","m040_m044_XY","m040_m044_YX","m040_m044_YY","m041_m044_XX","m041_m044_XY","m041_m044_YX","m041_m044_YY","m042_m044_XX","m042_m044_XY","m042_m044_YX","m042_m044_YY","m043_m044_XX","m043_m044_XY","m043_m044_YX","m043_m044_YY","m033_m045_XX","m033_m045_XY","m033_m045_YX","m033_m045_YY","m034_m045_XX","m034_m045_XY","m034_m045_YX","m034_m045_YY","m035_m045_XX","m035_m045_XY","m035_m045_YX","m035_m045_YY","m036_m045_XX","m036_m045_XY","m036_m045_YX","m036_m045_YY","m037_m045_XX","m037_m045_XY","m037_m045_YX","m037_m045_YY","m038_m045_XX","m038_m045_XY","m038_m045_YX","m038_m045_YY","m039_m045_XX","m039_m045_XY","m039_m045_YX","m039_m045_YY","m040_m045_XX","m040_m045_XY","m040_m045_YX","m040_m045_YY","m041_m045_XX","m041_m045_XY","m041_m045_YX","m041_m045_YY","m042_m045_XX","m042_m045_XY","m042_m045_YX","m042_m045_YY","m043_m045_XX","m043_m045_XY","m043_m045_YX","m043_m045_YY","m044_m045_XX","m044_m045_XY","m044_m045_YX","m044_m045_YY","m033_m046_XX","m033_m046_XY","m033_m046_YX","m033_m046_YY","m034_m046_XX","m034_m046_XY","m034_m046_YX","m034_m046_YY","m035_m046_XX","m035_m046_XY","m035_m046_YX","m035_m046_YY","m036_m046_XX","m036_m046_XY","m036_m046_YX","m036_m046_YY","m037_m046_XX","m037_m046_XY","m037_m046_YX","m037_m046_YY","m038_m046_XX","m038_m046_XY","m038_m046_YX","m038_m046_YY","m039_m046_XX","m039_m046_XY","m039_m046_YX","m039_m046_YY","m040_m046_XX","m040_m046_XY","m040_m046_YX","m040_m046_YY","m041_m046_XX","m041_m046_XY","m041_m046_YX","m041_m046_YY","m042_m046_XX","m042_m046_XY","m042_m046_YX","m042_m046_YY","m043_m046_XX","m043_m046_XY","m043_m046_YX","m043_m046_YY","m044_m046_XX","m044_m046_XY","m044_m046_YX","m044_m046_YY","m045_m046_XX","m045_m046_XY","m045_m046_YX","m045_m046_YY","m033_m047_XX","m033_m047_XY","m033_m047_YX","m033_m047_YY","m034_m047_XX","m034_m047_XY","m034_m047_YX","m034_m047_YY","m035_m047_XX","m035_m047_XY","m035_m047_YX","m035_m047_YY","m036_m047_XX","m036_m047_XY","m036_m047_YX","m036_m047_YY","m037_m047_XX","m037_m047_XY","m037_m047_YX","m037_m047_YY","m038_m047_XX","m038_m047_XY","m038_m047_YX","m038_m047_YY","m039_m047_XX","m039_m047_XY","m039_m047_YX","m039_m047_YY","m040_m047_XX","m040_m047_XY","m040_m047_YX","m040_m047_YY","m041_m047_XX","m041_m047_XY","m041_m047_YX","m041_m047_YY","m042_m047_XX","m042_m047_XY","m042_m047_YX","m042_m047_YY","m043_m047_XX","m043_m047_XY","m043_m047_YX","m043_m047_YY","m044_m047_XX","m044_m047_XY","m044_m047_YX","m044_m047_YY","m045_m047_XX","m045_m047_XY","m045_m047_YX","m045_m047_YY","m046_m047_XX","m046_m047_XY","m046_m047_YX","m046_m047_YY","m033_m049_XX","m033_m049_XY","m033_m049_YX","m033_m049_YY","m034_m049_XX","m034_m049_XY","m034_m049_YX","m034_m049_YY","m035_m049_XX","m035_m049_XY","m035_m049_YX","m035_m049_YY","m036_m049_XX","m036_m049_XY","m036_m049_YX","m036_m049_YY","m037_m049_XX","m037_m049_XY","m037_m049_YX","m037_m049_YY","m038_m049_XX","m038_m049_XY","m038_m049_YX","m038_m049_YY","m039_m049_XX","m039_m049_XY","m039_m049_YX","m039_m049_YY","m040_m049_XX","m040_m049_XY","m040_m049_YX","m040_m049_YY","m041_m049_XX","m041_m049_XY","m041_m049_YX","m041_m049_YY","m042_m049_XX","m042_m049_XY","m042_m049_YX","m042_m049_YY","m043_m049_XX","m043_m049_XY","m043_m049_YX","m043_m049_YY","m044_m049_XX","m044_m049_XY","m044_m049_YX","m044_m049_YY","m045_m049_XX","m045_m049_XY","m045_m049_YX","m045_m049_YY","m046_m049_XX","m046_m049_XY","m046_m049_YX","m046_m049_YY","m047_m049_XX","m047_m049_XY","m047_m049_YX","m047_m049_YY","m033_m050_XX","m033_m050_XY","m033_m050_YX","m033_m050_YY","m034_m050_XX","m034_m050_XY","m034_m050_YX","m034_m050_YY","m035_m050_XX","m035_m050_XY","m035_m050_YX","m035_m050_YY","m036_m050_XX","m036_m050_XY","m036_m050_YX","m036_m050_YY","m037_m050_XX","m037_m050_XY","m037_m050_YX","m037_m050_YY","m038_m050_XX","m038_m050_XY","m038_m050_YX","m038_m050_YY","m039_m050_XX","m039_m050_XY","m039_m050_YX","m039_m050_YY","m040_m050_XX","m040_m050_XY","m040_m050_YX","m040_m050_YY","m041_m050_XX","m041_m050_XY","m041_m050_YX","m041_m050_YY","m042_m050_XX","m042_m050_XY","m042_m050_YX","m042_m050_YY","m043_m050_XX","m043_m050_XY","m043_m050_YX","m043_m050_YY","m044_m050_XX","m044_m050_XY","m044_m050_YX","m044_m050_YY","m045_m050_XX","m045_m050_XY","m045_m050_YX","m045_m050_YY","m046_m050_XX","m046_m050_XY","m046_m050_YX","m046_m050_YY","m047_m050_XX","m047_m050_XY","m047_m050_YX","m047_m050_YY","m049_m050_XX","m049_m050_XY","m049_m050_YX","m049_m050_YY","m034_m051_XX","m034_m051_XY","m034_m051_YX","m034_m051_YY","m035_m051_XX","m035_m051_XY","m035_m051_YX","m035_m051_YY","m036_m051_XX","m036_m051_XY","m036_m051_YX","m036_m051_YY","m037_m051_XX","m037_m051_XY","m037_m051_YX","m037_m051_YY","m038_m051_XX","m038_m051_XY","m038_m051_YX","m038_m051_YY","m039_m051_XX","m039_m051_XY","m039_m051_YX","m039_m051_YY","m040_m051_XX","m040_m051_XY","m040_m051_YX","m040_m051_YY","m041_m051_XX","m041_m051_XY","m041_m051_YX","m041_m051_YY","m042_m051_XX","m042_m051_XY","m042_m051_YX","m042_m051_YY","m043_m051_XX","m043_m051_XY","m043_m051_YX","m043_m051_YY","m044_m051_XX","m044_m051_XY","m044_m051_YX","m044_m051_YY","m045_m051_XX","m045_m051_XY","m045_m051_YX","m045_m051_YY","m046_m051_XX","m046_m051_XY","m046_m051_YX","m046_m051_YY","m047_m051_XX","m047_m051_XY","m047_m051_YX","m047_m051_YY","m049_m051_XX","m049_m051_XY","m049_m051_YX","m049_m051_YY","m050_m051_XX","m050_m051_XY","m050_m051_YX","m050_m051_YY","m035_m052_XX","m035_m052_XY","m035_m052_YX","m035_m052_YY","m036_m052_XX","m036_m052_XY","m036_m052_YX","m036_m052_YY","m037_m052_XX","m037_m052_XY","m037_m052_YX","m037_m052_YY","m038_m052_XX","m038_m052_XY","m038_m052_YX","m038_m052_YY","m039_m052_XX","m039_m052_XY","m039_m052_YX","m039_m052_YY","m040_m052_XX","m040_m052_XY","m040_m052_YX","m040_m052_YY","m041_m052_XX","m041_m052_XY","m041_m052_YX","m041_m052_YY","m042_m052_XX","m042_m052_XY","m042_m052_YX","m042_m052_YY","m043_m052_XX","m043_m052_XY","m043_m052_YX","m043_m052_YY","m044_m052_XX","m044_m052_XY","m044_m052_YX","m044_m052_YY","m045_m052_XX","m045_m052_XY","m045_m052_YX","m045_m052_YY","m046_m052_XX","m046_m052_XY","m046_m052_YX","m046_m052_YY","m047_m052_XX","m047_m052_XY","m047_m052_YX","m047_m052_YY","m049_m052_XX","m049_m052_XY","m049_m052_YX","m049_m052_YY","m050_m052_XX","m050_m052_XY","m050_m052_YX","m050_m052_YY","m051_m052_XX","m051_m052_XY","m051_m052_YX","m051_m052_YY","m036_m053_XX","m036_m053_XY","m036_m053_YX","m036_m053_YY","m037_m053_XX","m037_m053_XY","m037_m053_YX","m037_m053_YY","m038_m053_XX","m038_m053_XY","m038_m053_YX","m038_m053_YY","m039_m053_XX","m039_m053_XY","m039_m053_YX","m039_m053_YY","m040_m053_XX","m040_m053_XY","m040_m053_YX","m040_m053_YY","m041_m053_XX","m041_m053_XY","m041_m053_YX","m041_m053_YY","m042_m053_XX","m042_m053_XY","m042_m053_YX","m042_m053_YY","m043_m053_XX","m043_m053_XY","m043_m053_YX","m043_m053_YY","m044_m053_XX","m044_m053_XY","m044_m053_YX","m044_m053_YY","m045_m053_XX","m045_m053_XY","m045_m053_YX","m045_m053_YY","m046_m053_XX","m046_m053_XY","m046_m053_YX","m046_m053_YY","m047_m053_XX","m047_m053_XY","m047_m053_YX","m047_m053_YY","m049_m053_XX","m049_m053_XY","m049_m053_YX","m049_m053_YY","m050_m053_XX","m050_m053_XY","m050_m053_YX","m050_m053_YY","m051_m053_XX","m051_m053_XY","m051_m053_YX","m051_m053_YY","m052_m053_XX","m052_m053_XY","m052_m053_YX","m052_m053_YY","m037_m054_XX","m037_m054_XY","m037_m054_YX","m037_m054_YY","m038_m054_XX","m038_m054_XY","m038_m054_YX","m038_m054_YY","m039_m054_XX","m039_m054_XY","m039_m054_YX","m039_m054_YY","m040_m054_XX","m040_m054_XY","m040_m054_YX","m040_m054_YY","m041_m054_XX","m041_m054_XY","m041_m054_YX","m041_m054_YY","m042_m054_XX","m042_m054_XY","m042_m054_YX","m042_m054_YY","m043_m054_XX","m043_m054_XY","m043_m054_YX","m043_m054_YY","m044_m054_XX","m044_m054_XY","m044_m054_YX","m044_m054_YY","m045_m054_XX","m045_m054_XY","m045_m054_YX","m045_m054_YY","m046_m054_XX","m046_m054_XY","m046_m054_YX","m046_m054_YY","m047_m054_XX","m047_m054_XY","m047_m054_YX","m047_m054_YY","m049_m054_XX","m049_m054_XY","m049_m054_YX","m049_m054_YY","m050_m054_XX","m050_m054_XY","m050_m054_YX","m050_m054_YY","m051_m054_XX","m051_m054_XY","m051_m054_YX","m051_m054_YY","m052_m054_XX","m052_m054_XY","m052_m054_YX","m052_m054_YY","m053_m054_XX","m053_m054_XY","m053_m054_YX","m053_m054_YY","m038_m055_XX","m038_m055_XY","m038_m055_YX","m038_m055_YY","m039_m055_XX","m039_m055_XY","m039_m055_YX","m039_m055_YY","m040_m055_XX","m040_m055_XY","m040_m055_YX","m040_m055_YY","m041_m055_XX","m041_m055_XY","m041_m055_YX","m041_m055_YY","m042_m055_XX","m042_m055_XY","m042_m055_YX","m042_m055_YY","m043_m055_XX","m043_m055_XY","m043_m055_YX","m043_m055_YY","m044_m055_XX","m044_m055_XY","m044_m055_YX","m044_m055_YY","m045_m055_XX","m045_m055_XY","m045_m055_YX","m045_m055_YY","m046_m055_XX","m046_m055_XY","m046_m055_YX","m046_m055_YY","m047_m055_XX","m047_m055_XY","m047_m055_YX","m047_m055_YY","m049_m055_XX","m049_m055_XY","m049_m055_YX","m049_m055_YY","m050_m055_XX","m050_m055_XY","m050_m055_YX","m050_m055_YY","m051_m055_XX","m051_m055_XY","m051_m055_YX","m051_m055_YY","m052_m055_XX","m052_m055_XY","m052_m055_YX","m052_m055_YY","m053_m055_XX","m053_m055_XY","m053_m055_YX","m053_m055_YY","m054_m055_XX","m054_m055_XY","m054_m055_YX","m054_m055_YY","m039_m056_XX","m039_m056_XY","m039_m056_YX","m039_m056_YY","m040_m056_XX","m040_m056_XY","m040_m056_YX","m040_m056_YY","m041_m056_XX","m041_m056_XY","m041_m056_YX","m041_m056_YY","m042_m056_XX","m042_m056_XY","m042_m056_YX","m042_m056_YY","m043_m056_XX","m043_m056_XY","m043_m056_YX","m043_m056_YY","m044_m056_XX","m044_m056_XY","m044_m056_YX","m044_m056_YY","m045_m056_XX","m045_m056_XY","m045_m056_YX","m045_m056_YY","m046_m056_XX","m046_m056_XY","m046_m056_YX","m046_m056_YY","m047_m056_XX","m047_m056_XY","m047_m056_YX","m047_m056_YY","m049_m056_XX","m049_m056_XY","m049_m056_YX","m049_m056_YY","m050_m056_XX","m050_m056_XY","m050_m056_YX","m050_m056_YY","m051_m056_XX","m051_m056_XY","m051_m056_YX","m051_m056_YY","m052_m056_XX","m052_m056_XY","m052_m056_YX","m052_m056_YY","m053_m056_XX","m053_m056_XY","m053_m056_YX","m053_m056_YY","m054_m056_XX","m054_m056_XY","m054_m056_YX","m054_m056_YY","m055_m056_XX","m055_m056_XY","m055_m056_YX","m055_m056_YY","m040_m057_XX","m040_m057_XY","m040_m057_YX","m040_m057_YY","m041_m057_XX","m041_m057_XY","m041_m057_YX","m041_m057_YY","m042_m057_XX","m042_m057_XY","m042_m057_YX","m042_m057_YY","m043_m057_XX","m043_m057_XY","m043_m057_YX","m043_m057_YY","m044_m057_XX","m044_m057_XY","m044_m057_YX","m044_m057_YY","m045_m057_XX","m045_m057_XY","m045_m057_YX","m045_m057_YY","m046_m057_XX","m046_m057_XY","m046_m057_YX","m046_m057_YY","m047_m057_XX","m047_m057_XY","m047_m057_YX","m047_m057_YY","m049_m057_XX","m049_m057_XY","m049_m057_YX","m049_m057_YY","m050_m057_XX","m050_m057_XY","m050_m057_YX","m050_m057_YY","m051_m057_XX","m051_m057_XY","m051_m057_YX","m051_m057_YY","m052_m057_XX","m052_m057_XY","m052_m057_YX","m052_m057_YY","m053_m057_XX","m053_m057_XY","m053_m057_YX","m053_m057_YY","m054_m057_XX","m054_m057_XY","m054_m057_YX","m054_m057_YY","m055_m057_XX","m055_m057_XY","m055_m057_YX","m055_m057_YY","m056_m057_XX","m056_m057_XY","m056_m057_YX","m056_m057_YY","m041_m058_XX","m041_m058_XY","m041_m058_YX","m041_m058_YY","m042_m058_XX","m042_m058_XY","m042_m058_YX","m042_m058_YY","m043_m058_XX","m043_m058_XY","m043_m058_YX","m043_m058_YY","m044_m058_XX","m044_m058_XY","m044_m058_YX","m044_m058_YY","m045_m058_XX","m045_m058_XY","m045_m058_YX","m045_m058_YY","m046_m058_XX","m046_m058_XY","m046_m058_YX","m046_m058_YY","m047_m058_XX","m047_m058_XY","m047_m058_YX","m047_m058_YY","m049_m058_XX","m049_m058_XY","m049_m058_YX","m049_m058_YY","m050_m058_XX","m050_m058_XY","m050_m058_YX","m050_m058_YY","m051_m058_XX","m051_m058_XY","m051_m058_YX","m051_m058_YY","m052_m058_XX","m052_m058_XY","m052_m058_YX","m052_m058_YY","m053_m058_XX","m053_m058_XY","m053_m058_YX","m053_m058_YY","m054_m058_XX","m054_m058_XY","m054_m058_YX","m054_m058_YY","m055_m058_XX","m055_m058_XY","m055_m058_YX","m055_m058_YY","m056_m058_XX","m056_m058_XY","m056_m058_YX","m056_m058_YY","m057_m058_XX","m057_m058_XY","m057_m058_YX","m057_m058_YY","m042_m059_XX","m042_m059_XY","m042_m059_YX","m042_m059_YY","m043_m059_XX","m043_m059_XY","m043_m059_YX","m043_m059_YY","m044_m059_XX","m044_m059_XY","m044_m059_YX","m044_m059_YY","m045_m059_XX","m045_m059_XY","m045_m059_YX","m045_m059_YY","m046_m059_XX","m046_m059_XY","m046_m059_YX","m046_m059_YY","m047_m059_XX","m047_m059_XY","m047_m059_YX","m047_m059_YY","m049_m059_XX","m049_m059_XY","m049_m059_YX","m049_m059_YY","m050_m059_XX","m050_m059_XY","m050_m059_YX","m050_m059_YY","m051_m059_XX","m051_m059_XY","m051_m059_YX","m051_m059_YY","m052_m059_XX","m052_m059_XY","m052_m059_YX","m052_m059_YY","m053_m059_XX","m053_m059_XY","m053_m059_YX","m053_m059_YY","m054_m059_XX","m054_m059_XY","m054_m059_YX","m054_m059_YY","m055_m059_XX","m055_m059_XY","m055_m059_YX","m055_m059_YY","m056_m059_XX","m056_m059_XY","m056_m059_YX","m056_m059_YY","m057_m059_XX","m057_m059_XY","m057_m059_YX","m057_m059_YY","m058_m059_XX","m058_m059_XY","m058_m059_YX","m058_m059_YY","m043_m060_XX","m043_m060_XY","m043_m060_YX","m043_m060_YY","m044_m060_XX","m044_m060_XY","m044_m060_YX","m044_m060_YY","m045_m060_XX","m045_m060_XY","m045_m060_YX","m045_m060_YY","m046_m060_XX","m046_m060_XY","m046_m060_YX","m046_m060_YY","m047_m060_XX","m047_m060_XY","m047_m060_YX","m047_m060_YY","m049_m060_XX","m049_m060_XY","m049_m060_YX","m049_m060_YY","m050_m060_XX","m050_m060_XY","m050_m060_YX","m050_m060_YY","m051_m060_XX","m051_m060_XY","m051_m060_YX","m051_m060_YY","m052_m060_XX","m052_m060_XY","m052_m060_YX","m052_m060_YY","m053_m060_XX","m053_m060_XY","m053_m060_YX","m053_m060_YY","m054_m060_XX","m054_m060_XY","m054_m060_YX","m054_m060_YY","m055_m060_XX","m055_m060_XY","m055_m060_YX","m055_m060_YY","m056_m060_XX","m056_m060_XY","m056_m060_YX","m056_m060_YY","m057_m060_XX","m057_m060_XY","m057_m060_YX","m057_m060_YY","m058_m060_XX","m058_m060_XY","m058_m060_YX","m058_m060_YY","m059_m060_XX","m059_m060_XY","m059_m060_YX","m059_m060_YY","m044_m061_XX","m044_m061_XY","m044_m061_YX","m044_m061_YY","m045_m061_XX","m045_m061_XY","m045_m061_YX","m045_m061_YY","m046_m061_XX","m046_m061_XY","m046_m061_YX","m046_m061_YY","m047_m061_XX","m047_m061_XY","m047_m061_YX","m047_m061_YY","m049_m061_XX","m049_m061_XY","m049_m061_YX","m049_m061_YY","m050_m061_XX","m050_m061_XY","m050_m061_YX","m050_m061_YY","m051_m061_XX","m051_m061_XY","m051_m061_YX","m051_m061_YY","m052_m061_XX","m052_m061_XY","m052_m061_YX","m052_m061_YY","m053_m061_XX","m053_m061_XY","m053_m061_YX","m053_m061_YY","m054_m061_XX","m054_m061_XY","m054_m061_YX","m054_m061_YY","m055_m061_XX","m055_m061_XY","m055_m061_YX","m055_m061_YY","m056_m061_XX","m056_m061_XY","m056_m061_YX","m056_m061_YY","m057_m061_XX","m057_m061_XY","m057_m061_YX","m057_m061_YY","m058_m061_XX","m058_m061_XY","m058_m061_YX","m058_m061_YY","m059_m061_XX","m059_m061_XY","m059_m061_YX","m059_m061_YY","m060_m061_XX","m060_m061_XY","m060_m061_YX","m060_m061_YY","m045_m062_XX","m045_m062_XY","m045_m062_YX","m045_m062_YY","m046_m062_XX","m046_m062_XY","m046_m062_YX","m046_m062_YY","m047_m062_XX","m047_m062_XY","m047_m062_YX","m047_m062_YY","m049_m062_XX","m049_m062_XY","m049_m062_YX","m049_m062_YY","m050_m062_XX","m050_m062_XY","m050_m062_YX","m050_m062_YY","m051_m062_XX","m051_m062_XY","m051_m062_YX","m051_m062_YY","m052_m062_XX","m052_m062_XY","m052_m062_YX","m052_m062_YY","m053_m062_XX","m053_m062_XY","m053_m062_YX","m053_m062_YY","m054_m062_XX","m054_m062_XY","m054_m062_YX","m054_m062_YY","m055_m062_XX","m055_m062_XY","m055_m062_YX","m055_m062_YY","m056_m062_XX","m056_m062_XY","m056_m062_YX","m056_m062_YY","m057_m062_XX","m057_m062_XY","m057_m062_YX","m057_m062_YY","m058_m062_XX","m058_m062_XY","m058_m062_YX","m058_m062_YY","m059_m062_XX","m059_m062_XY","m059_m062_YX","m059_m062_YY","m060_m062_XX","m060_m062_XY","m060_m062_YX","m060_m062_YY","m061_m062_XX","m061_m062_XY","m061_m062_YX","m061_m062_YY","m046_m063_XX","m046_m063_XY","m046_m063_YX","m046_m063_YY","m047_m063_XX","m047_m063_XY","m047_m063_YX","m047_m063_YY","m049_m063_XX","m049_m063_XY","m049_m063_YX","m049_m063_YY","m050_m063_XX","m050_m063_XY","m050_m063_YX","m050_m063_YY","m051_m063_XX","m051_m063_XY","m051_m063_YX","m051_m063_YY","m052_m063_XX","m052_m063_XY","m052_m063_YX","m052_m063_YY","m053_m063_XX","m053_m063_XY","m053_m063_YX","m053_m063_YY","m054_m063_XX","m054_m063_XY","m054_m063_YX","m054_m063_YY","m055_m063_XX","m055_m063_XY","m055_m063_YX","m055_m063_YY","m056_m063_XX","m056_m063_XY","m056_m063_YX","m056_m063_YY","m057_m063_XX","m057_m063_XY","m057_m063_YX","m057_m063_YY","m058_m063_XX","m058_m063_XY","m058_m063_YX","m058_m063_YY","m059_m063_XX","m059_m063_XY","m059_m063_YX","m059_m063_YY","m060_m063_XX","m060_m063_XY","m060_m063_YX","m060_m063_YY","m061_m063_XX","m061_m063_XY","m061_m063_YX","m061_m063_YY","m062_m063_XX","m062_m063_XY","m062_m063_YX","m062_m063_YY","m033_m051_XX","m033_m051_XY","m033_m051_YX","m033_m051_YY","m033_m052_XX","m033_m052_XY","m033_m052_YX","m033_m052_YY","m033_m053_XX","m033_m053_XY","m033_m053_YX","m033_m053_YY","m033_m054_XX","m033_m054_XY","m033_m054_YX","m033_m054_YY","m033_m055_XX","m033_m055_XY","m033_m055_YX","m033_m055_YY","m033_m056_XX","m033_m056_XY","m033_m056_YX","m033_m056_YY","m033_m057_XX","m033_m057_XY","m033_m057_YX","m033_m057_YY","m033_m058_XX","m033_m058_XY","m033_m058_YX","m033_m058_YY","m033_m059_XX","m033_m059_XY","m033_m059_YX","m033_m059_YY","m033_m060_XX","m033_m060_XY","m033_m060_YX","m033_m060_YY","m033_m061_XX","m033_m061_XY","m033_m061_YX","m033_m061_YY","m033_m062_XX","m033_m062_XY","m033_m062_YX","m033_m062_YY","m033_m063_XX","m033_m063_XY","m033_m063_YX","m033_m063_YY","m034_m052_XX","m034_m052_XY","m034_m052_YX","m034_m052_YY","m034_m053_XX","m034_m053_XY","m034_m053_YX","m034_m053_YY","m034_m054_XX","m034_m054_XY","m034_m054_YX","m034_m054_YY","m034_m055_XX","m034_m055_XY","m034_m055_YX","m034_m055_YY","m034_m056_XX","m034_m056_XY","m034_m056_YX","m034_m056_YY","m034_m057_XX","m034_m057_XY","m034_m057_YX","m034_m057_YY","m034_m058_XX","m034_m058_XY","m034_m058_YX","m034_m058_YY","m034_m059_XX","m034_m059_XY","m034_m059_YX","m034_m059_YY","m034_m060_XX","m034_m060_XY","m034_m060_YX","m034_m060_YY","m034_m061_XX","m034_m061_XY","m034_m061_YX","m034_m061_YY","m034_m062_XX","m034_m062_XY","m034_m062_YX","m034_m062_YY","m034_m063_XX","m034_m063_XY","m034_m063_YX","m034_m063_YY","m035_m053_XX","m035_m053_XY","m035_m053_YX","m035_m053_YY","m035_m054_XX","m035_m054_XY","m035_m054_YX","m035_m054_YY","m035_m055_XX","m035_m055_XY","m035_m055_YX","m035_m055_YY","m035_m056_XX","m035_m056_XY","m035_m056_YX","m035_m056_YY","m035_m057_XX","m035_m057_XY","m035_m057_YX","m035_m057_YY","m035_m058_XX","m035_m058_XY","m035_m058_YX","m035_m058_YY","m035_m059_XX","m035_m059_XY","m035_m059_YX","m035_m059_YY","m035_m060_XX","m035_m060_XY","m035_m060_YX","m035_m060_YY","m035_m061_XX","m035_m061_XY","m035_m061_YX","m035_m061_YY","m035_m062_XX","m035_m062_XY","m035_m062_YX","m035_m062_YY","m035_m063_XX","m035_m063_XY","m035_m063_YX","m035_m063_YY","m036_m054_XX","m036_m054_XY","m036_m054_YX","m036_m054_YY","m036_m055_XX","m036_m055_XY","m036_m055_YX","m036_m055_YY","m036_m056_XX","m036_m056_XY","m036_m056_YX","m036_m056_YY","m036_m057_XX","m036_m057_XY","m036_m057_YX","m036_m057_YY","m036_m058_XX","m036_m058_XY","m036_m058_YX","m036_m058_YY","m036_m059_XX","m036_m059_XY","m036_m059_YX","m036_m059_YY","m036_m060_XX","m036_m060_XY","m036_m060_YX","m036_m060_YY","m036_m061_XX","m036_m061_XY","m036_m061_YX","m036_m061_YY","m036_m062_XX","m036_m062_XY","m036_m062_YX","m036_m062_YY","m036_m063_XX","m036_m063_XY","m036_m063_YX","m036_m063_YY","m037_m055_XX","m037_m055_XY","m037_m055_YX","m037_m055_YY","m037_m056_XX","m037_m056_XY","m037_m056_YX","m037_m056_YY","m037_m057_XX","m037_m057_XY","m037_m057_YX","m037_m057_YY","m037_m058_XX","m037_m058_XY","m037_m058_YX","m037_m058_YY","m037_m059_XX","m037_m059_XY","m037_m059_YX","m037_m059_YY","m037_m060_XX","m037_m060_XY","m037_m060_YX","m037_m060_YY","m037_m061_XX","m037_m061_XY","m037_m061_YX","m037_m061_YY","m037_m062_XX","m037_m062_XY","m037_m062_YX","m037_m062_YY","m037_m063_XX","m037_m063_XY","m037_m063_YX","m037_m063_YY","m038_m056_XX","m038_m056_XY","m038_m056_YX","m038_m056_YY","m038_m057_XX","m038_m057_XY","m038_m057_YX","m038_m057_YY","m038_m058_XX","m038_m058_XY","m038_m058_YX","m038_m058_YY","m038_m059_XX","m038_m059_XY","m038_m059_YX","m038_m059_YY","m038_m060_XX","m038_m060_XY","m038_m060_YX","m038_m060_YY","m038_m061_XX","m038_m061_XY","m038_m061_YX","m038_m061_YY","m038_m062_XX","m038_m062_XY","m038_m062_YX","m038_m062_YY","m038_m063_XX","m038_m063_XY","m038_m063_YX","m038_m063_YY","m039_m057_XX","m039_m057_XY","m039_m057_YX","m039_m057_YY","m039_m058_XX","m039_m058_XY","m039_m058_YX","m039_m058_YY","m039_m059_XX","m039_m059_XY","m039_m059_YX","m039_m059_YY","m039_m060_XX","m039_m060_XY","m039_m060_YX","m039_m060_YY","m039_m061_XX","m039_m061_XY","m039_m061_YX","m039_m061_YY","m039_m062_XX","m039_m062_XY","m039_m062_YX","m039_m062_YY","m039_m063_XX","m039_m063_XY","m039_m063_YX","m039_m063_YY","m040_m058_XX","m040_m058_XY","m040_m058_YX","m040_m058_YY","m040_m059_XX","m040_m059_XY","m040_m059_YX","m040_m059_YY","m040_m060_XX","m040_m060_XY","m040_m060_YX","m040_m060_YY","m040_m061_XX","m040_m061_XY","m040_m061_YX","m040_m061_YY","m040_m062_XX","m040_m062_XY","m040_m062_YX","m040_m062_YY","m040_m063_XX","m040_m063_XY","m040_m063_YX","m040_m063_YY","m041_m059_XX","m041_m059_XY","m041_m059_YX","m041_m059_YY","m041_m060_XX","m041_m060_XY","m041_m060_YX","m041_m060_YY","m041_m061_XX","m041_m061_XY","m041_m061_YX","m041_m061_YY","m041_m062_XX","m041_m062_XY","m041_m062_YX","m041_m062_YY","m041_m063_XX","m041_m063_XY","m041_m063_YX","m041_m063_YY","m042_m060_XX","m042_m060_XY","m042_m060_YX","m042_m060_YY","m042_m061_XX","m042_m061_XY","m042_m061_YX","m042_m061_YY","m042_m062_XX","m042_m062_XY","m042_m062_YX","m042_m062_YY","m042_m063_XX","m042_m063_XY","m042_m063_YX","m042_m063_YY","m043_m061_XX","m043_m061_XY","m043_m061_YX","m043_m061_YY","m043_m062_XX","m043_m062_XY","m043_m062_YX","m043_m062_YY","m043_m063_XX","m043_m063_XY","m043_m063_YX","m043_m063_YY","m044_m062_XX","m044_m062_XY","m044_m062_YX","m044_m062_YY","m044_m063_XX","m044_m063_XY","m044_m063_YX","m044_m063_YY","m045_m063_XX","m045_m063_XY","m045_m063_YX","m045_m063_YY"];

    if (!this.table || this.len !== data.length) {
      this.len = data.length;
      this.numCols = Math.floor(this.width / (this.cellWidth + this.cellGap));
      this.numRows = Math.ceil(this.len / this.numCols) || 1;
      console.log(this.numCols, this.numRows);

      // initialise 2d array of cells of a table
      this.cells = new Array(this.numRows);
      for (let i = 0; i < this.numRows; i++) {
        this.cells[i] = new Array(this.numCols);
      }
      // console.log("cells 1 = ", this.cells);

      // fill each cell with a data object
      let idx = 0;
      for (let i = 0; i < this.numRows; i++) {
        for (let j = 0; j < this.numCols; j++) {
          if (idx >= this.len) break;
          const myCell:Cell = { metadata :  { baseline: data[idx], idx: idx}};
          this.cells[i][j] = myCell;
          idx++;
        }
      }
      // console.log("cells 2 = ", this.cells);

      this.drawTable();
    }
  }

  drawTable() {
    // clear/remove existing table
    d3.select('#' + this.divId)
      .selectAll('table')
      .remove();

    this.table = d3
      .select('#' + this.divId)
      .append('table')
      .style('class', 'table');

    const tablebody = this.table.append('tbody');
    const rows = tablebody.selectAll('tr').data(this.cells).enter().append('tr');

    // we built the rows using the nested array - now each row has its own array.
    rows
      .selectAll('td')
      // each row has data associated; we get it and enter it for the cells.
      .data((d) => {
        return d;
      })
      .enter()
      .append('td')
      .append('div')
      .on('click', (i) => {
        if (i?.metadata?.idx !== undefined) {
          const baselines = i?.metadata.baseline.split(/[-_]+/);
          window.open(
            `http://localhost:8002/${baselines[0]}/${baselines[1]}/${baselines[2]}`
          );
        }
      })
      .text((d) => {
        return this.getName(d?.metadata);
      })
      .append('img')
      .attr('src', `src/utils/default_image.bmp`)
      .attr('id', (d) => {
        const id = this.getId(d?.metadata);
        if (id) return id;
      })
      .attr('width', this.cellWidth)
      .attr('height', this.cellHeight);

    return;
  }

  private getName(d: any) {
    return d?.baseline ? d?.baseline : '-';
  }

  private getId(d: any) {
    return d?.baseline ? `canvas-${d?.baseline}` : undefined;
  }
}

export default SpectrogramPlotTable;
